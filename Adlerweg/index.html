
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>Adlerweg Etappe 5: Alpengasthof Buchacker - Kaiserhaus </title>

    <link rel="stylesheet" href="js/leaflet/leaflet.css" />
	<link rel="stylesheet" href="js/leaflet-elevation/leaflet.elevation-0.0.4.css" />
	
    <script src="js/leaflet/leaflet.js"></script>
	<script src="js/leaflet-omnivore/leaflet-omnivore.js"></script>
	<script src="js/leaflet-elevation/leaflet.elevation-0.0.4.min.js"></script>
	<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>

    <style>
        body {
            padding: 0px;
            margin: 0px;
        }
        html, body, {
            height: 100vh;
            width: 100vw;
        }
		h1 {
		color: white;
		background-color: black;
		text-align: center;
		}
		h4 {
		color: white;
		background-color: black;
		text-align: center;
		}
		#map {
			float: center;
			height: 600px;
			width: 1024px;
			border: 1px solid black;
		}
		div {
		display: block;
		margin-left: auto;
		margin-right: auto; 
		} 
    </style>
</head>

<body>
	<h1> Adlerweg Etappe 5: Alpengasthof Buchacker – Kaiserhaus</h1>
	<p style="text-align: center"> Moderate Ansprüche an die Kondition stellt diese Adlerweg-Etappe, die vom Alpengasthaus Buchacker zum Gasthof Gwerchtwirt führt. Entlang der Strecke gibt es immer wieder wunderbare Ausblicke zum Kaisergebirge, zu den Kitzbühler Alpen, zum Rofangebirge, zu den Zillertaler und Stubaier Alpen, und bei guter Sicht sogar bis zum Großglockner und Großvenediger.</p>
    <div id="map"></div>
	<h4> Autor: <a href="https://github.com/FloCorz/FloCorz.github.io" style="color: white; text-decoration:none;">Florian Corzelius</a></h4> 
	
    <script>
        var layers = {
            geolandbasemap: L.tileLayer("https://{s}.wien.gv.at/basemap/geolandbasemap/normal/google3857/{z}/{y}/{x}.png", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            bmapgrau: L.tileLayer("https://{s}.wien.gv.at/basemap/bmapgrau/normal/google3857/{z}/{y}/{x}.png", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            bmapoverlay: L.tileLayer("https://{s}.wien.gv.at/basemap/bmapoverlay/normal/google3857/{z}/{y}/{x}.png", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            bmaphidpi: L.tileLayer("https://{s}.wien.gv.at/basemap/bmaphidpi/normal/google3857/{z}/{y}/{x}.jpeg", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            bmaporthofoto30cm: L.tileLayer("https://{s}.wien.gv.at/basemap/bmaporthofoto30cm/normal/google3857/{z}/{y}/{x}.jpeg", {
                subdomains: ['maps', 'maps1', 'maps2', 'maps3', 'maps4'],
                attribution: 'Datenquelle: <a href="http://www.basemap.at/">basemap.at</a>'
            }),
            osm: L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                subdomains: ['a', 'b', 'c'],
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
            })
        };

        // Karte definieren
        var map = L.map('map', {
            layers: [layers.geolandbasemap],
            center : [47.654, 13.370],
            zoom : 8
        });

        // Maßstab hinzufügen
        L.control.scale({
            maxWidth: 200,
            metric: true,
            imperial: false
        }).addTo(map);

        // Höhenprofil control hinzufügen
        var profileControl = L.control.elevation({
            position : 'bottomleft',
            theme : 'steelblue-theme'
        });
        profileControl.addTo(map);

        // GPX Track laden
        gpxTrack = omnivore.gpx('Data/AdlerwegEtappe05.gpx').addTo(map);
		
		
        // nach erfolgreichem Laden Popup hinzufügen, Ausschnitt setzen und Höhenprofil erzeugen
        gpxTrack.on('ready', function () {
            // Popup hinzufügen
            var markup = '<h3>Adlerweg-Etappe 5: Alpengasthof Buchacker - Kaiserhaus</h3>';
            markup += '<p>Moderate Ansprüche an die Kondition stellt diese Adlerweg-Etappe, die vom Alpengasthaus Buchacker zum Gasthof Gwerchtwirt führt. Entlang der Strecke gibt es immer wieder wunderbare Ausblicke zum Kaisergebirge, zu den Kitzbühler Alpen, zum Rofangebirge, zu den Zillertaler und Stubaier Alpen, und bei guter Sicht sogar bis zum Großglockner und Großvenediger.</p>'
            markup += '<li>Ausgangspunkt: Alpengasthaus Buchacker</li>';
            markup += '<li>Endpunkt: Gasthof Gwercherwirt</li>';
            markup += '<li>Höhenmeter bergauf: 980</li>';
            markup += '<li>Höhenmeter bergab: 1630</li>';
            markup += '<li>Höchster Punkt: 1772</li>';
            markup += '<li>Schwierigkeitsgrad: leicht</li>';
            markup += '<li>Streckenlänge (in km): 18</li>';
            markup += '<li>Gehzeit (in Stunden): 3</li>';
            markup += '<li>Einkehrmöglichkeiten: Alpengasthof Buchacker, Gwercherwirt</li>';
            markup += '<li><a href="http://www.tirol.at/reisefuehrer/sport/wandern/wandertouren/a-adlerweg-etappe-5-gasthof-buchacker-pinegg">Weitere Informationen</a></li>';
            gpxTrack.bindPopup(markup, { maxWidth : 450 });

            // Ausschnitt setzen
            map.fitBounds(gpxTrack.getBounds());

            // Höhenprofil erzeugen
        gpxTrack.eachLayer(function(layer) {
        profileControl.addData(layer.feature);
				
		//console.log(layer.feature.geometry.coordinates)
		var pts = layer.feature.geometry.coordinates;
		
		for (var i = 1; i<pts.length; i++) {
			//console.log(pts[i]);
			//console.log(pts[i-1]);
			
		
		//Entfernung bestimmen 
		
		var dist = map.distance(
			[pts[i][1],pts[i][0] ], 
			[pts[i-1][1],pts[i-1][0] ]
			).toFixed(0);
			//console.log(dist);
			
		var delta = pts[i][2]-pts[i-1][2];
		//console.log(delta, "Höhenmeter auf", dist, "m Strecke");
		
		var s = Math.atan(delta/dist);
		var deg = (rad * (180/Math.PI)).toFixed(1);
		console.log(deg);
		}
        });
     });
		
		var huts = [
			L.marker([47.533657, 12.019142], { title: "Gasthof Buchhacker", icon: L.icon({iconAnchor: [12,30], iconUrl: 'icons/hut.png'}) }),
			L.marker([47.51879, 11.89715], { title: "Gschwercherwirt", icon: L.icon({iconAnchor: [12,30], iconUrl: 'icons/hut.png'}) }),
			];
		var hutsLayer = L.featureGroup(); 
		for (var i=0; i<huts.length; i++) {
			hutsLayer.addLayer(huts[i]);
		}

		map.on("zoomend", function () {
			if (map.getZoom() >= 15) { 
				map.addLayer(hutsLayer);
			} else { 
				map.removeLayer(hutsLayer); 
			}
		});
		
		var track = [
			L.marker([47.53318720, 12.01885110], { title: "Etappenstart", icon: L.icon({iconAnchor: [12,30], iconUrl: 'icons/start.png'}) }),
			L.marker([47.537894, 12.023172], { title: "Buchacker Alm Adlerhorst", icon: L.icon({iconAnchor: [12,30], iconUrl: 'icons/adler.png'}) }),
			L.marker([47.51852840, 11.89731090], { title: "Etappenziel", icon: L.icon({iconAnchor: [12,30], iconUrl: 'icons/ziel.png'}) }),
			];
		var trackLayer = L.featureGroup(); 
		for (var i=0; i<track.length; i++) {
			trackLayer.addLayer(track[i]);
		}

		map.on("zoomend", function () {
			if (map.getZoom() >= 10) { 
				map.addLayer(trackLayer);
			} else { 
				map.removeLayer(trackLayer); 
			}
		});
		
		var layerControl = L.control.layers({
            "basemap.at - STANDARD": layers.geolandbasemap,
            "basemap.at - GRAU": layers.bmapgrau,
            "basemap.at - OVERLAY": layers.bmapoverlay,
            "basemap.at - HIGH-DPI": layers.bmaphidpi,
            "basemap.at - ORTHOFOTO": layers.bmaporthofoto30cm,
            "OpenStreetMap": layers.osm,
        },{
            "Adlerweg Etappe 5" : gpxTrack
        }).addTo(map);
		
    </script>
</body>

</html>